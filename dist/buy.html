<!DOCTYPE html>
<html lang="zh-cmn-Hans">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
    <meta name="format-detection" content="telephone=no, date=no, address=no, email=no, url=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title> </title>
    <script>!function(e,t){function i(){var t=n.getBoundingClientRect().width;t/m>540&&(t=540*m);var i=t/10;n.style.fontSize=i+"px",d.rem=e.rem=i}var a,r=e.document,n=r.documentElement,o=r.querySelector('meta[name="viewport"]'),l=r.querySelector('meta[name="flexible"]'),m=0,s=0,d=t.flexible||(t.flexible={});if(o){console.warn("将根据已有的meta标签来设置缩放比例");var p=o.getAttribute("content").match(/initial\-scale=([\d\.]+)/);p&&(s=parseFloat(p[1]),m=parseInt(1/s))}else if(l){var c=l.getAttribute("content");if(c){var u=c.match(/initial\-dpr=([\d\.]+)/),f=c.match(/maximum\-dpr=([\d\.]+)/);u&&(m=parseFloat(u[1]),s=parseFloat((1/m).toFixed(2))),f&&(m=parseFloat(f[1]),s=parseFloat((1/m).toFixed(2)))}}if(!m&&!s){e.navigator.appVersion.match(/android/gi);var v=e.navigator.appVersion.match(/iphone/gi),h=e.devicePixelRatio;s=1/(m=v?h>=3&&(!m||m>=3)?3:h>=2&&(!m||m>=2)?2:1:1)}if(n.setAttribute("data-dpr",m),!o)if((o=r.createElement("meta")).setAttribute("name","viewport"),o.setAttribute("content","initial-scale="+s+", maximum-scale="+s+", minimum-scale="+s+', user-scalable=no, shrink-to-fit=no"'),n.firstElementChild)n.firstElementChild.appendChild(o);else{var x=r.createElement("div");x.appendChild(o),r.write(x.innerHTML)}e.addEventListener("resize",function(){clearTimeout(a),a=setTimeout(i,300)},!1),e.addEventListener("pageshow",function(e){e.persisted&&(clearTimeout(a),a=setTimeout(i,300))},!1),"complete"===r.readyState?r.body.style.fontSize=12*m+"px":r.addEventListener("DOMContentLoaded",function(e){r.body.style.fontSize=12*m+"px"},!1),i(),d.dpr=e.dpr=m,d.refreshRem=i,d.rem2px=function(e){var t=parseFloat(e)*this.rem;return"string"==typeof e&&e.match(/rem$/)&&(t+="px"),t},d.px2rem=function(e){var t=parseFloat(e)/this.rem;return"string"==typeof e&&e.match(/px$/)&&(t+="rem"),t}}(window,window.lib||(window.lib={}))</script>
    <meta name="description" content="">
    <link rel="stylesheet" href="./css/main.css">
</head>

<body>
    <div class="page-buy-wrap">
        <ul class="buy-main-list">
            <li>
                <img class="bl-cover" src="./img/page/gold-1.png" />
                <div class="bl-name">青铜战甲 ￥20/件</div>
                <a class="bl-bt" data-src="./img/page/gold-1.png" data-gold="20"  href="javascript:;"></a>
            </li>
            <li>
                <img class="bl-cover" src="./img/page/gold-2.png" />
                <div class="bl-name">白银战甲 ￥100/件</div>
                <a class="bl-bt" data-src="./img/page/gold-2.png" data-gold="100" href="javascript:;"></a>
            </li>
            <li>
                <img class="bl-cover" src="./img/page/gold-3.png" />
                <div class="bl-name">黄金战甲 ￥500/件</div>
                <a class="bl-bt" data-src="./img/page/gold-3.png" data-gold="500" href="javascript:;"></a>
            </li>
            <li>
                <img class="bl-cover" src="./img/page/gold-4.png" />
                <div class="bl-name">钻石战甲 ￥1000/件</div>
                <a class="bl-bt" data-src="./img/page/gold-4.png" data-gold="1000" href="javascript:;"></a>
            </li>
            <li>
                <img class="bl-cover" src="./img/page/gold-5.png" />
                <div class="bl-name">至尊战甲 ￥2000/件</div>
                <a class="bl-bt" data-src="./img/page/gold-5.png" data-gold="2000" href="javascript:;"></a>
            </li>
        </ul>
        <div class="page-buy-foot">注：每件战甲每天分股</div>
    </div>

    <div class="gbuy-wrap js-gbuy-wrap hide">   
        <div class="gbuy-wrap-mask"></div>
        <div class="gbuy-wrap-main">
            <div class="gbuy-wrap-main-title">购买战甲</div>
            <img class="gbuy-wrap-main-cover" src="./img/page/gold-1.png" alt="" />
            <div class="gbuy-num plus"></div>
            <div class="gbuy-num reduce"></div>
            <div class="gbuy-num show">0</div>
            <div class="gbuy-total" gold="">￥50000</div>
            <div class="gbuy-close"></div>
            <a class="gbuy-buy" href="javascript:;"></a>
        </div>
    </div>

    <script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
    <script>    
        $(function(){
            var app = {
                buyNum: 1, /* 购买数量*/
                init: function(){
                    this.bindEvent();
                },
                bindEvent: function(){
                    var self = this;
                    /** 弹窗 */
                    $('.buy-main-list').on('click', '.bl-bt', function(){
                        self.buyNum = 1;
                        var $self = $(this);
                        $('.js-gbuy-wrap').removeClass('hide');
                        $('.gbuy-wrap-main-cover').attr({
                            src: $self.data('src')
                        })
                        $('.gbuy-num.show').html(self.buyNum);
                        $('.gbuy-total').attr({
                            gold: $self.data('gold')
                        }).html('￥'+$self.data('gold'));
                    })
                    /** 加数量*/
                    $('.gbuy-num.plus').on('click', function(){
                        self.buyNum++;
                        $('.gbuy-num.show').html(self.buyNum);
                        $('.gbuy-total').html($('.gbuy-total').attr('gold')*self.buyNum);
                    })
                    /** 减数量*/
                    $('.gbuy-num.reduce').on('click', function(){
                        if(self.buyNum <= 1){
                            return;
                        }
                        self.buyNum--;
                        $('.gbuy-num.show').html(self.buyNum);
                        $('.gbuy-total').html($('.gbuy-total').attr('gold')*self.buyNum);
                    })
                    /** 关窗*/
                    $('.gbuy-close').on('click', function(){
                        var self = $(this);
                        $('.js-gbuy-wrap').addClass('hide');
                    })
                }
            }
            app.init();
        })
    </script>
    
</body>

</html>
